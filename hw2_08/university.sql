CREATE DATABASE university;

USE university;

CREATE TABLE groups (
    id INT PRIMARY KEY,
    name VARCHAR(20) NOT NULL
);

CREATE TABLE teachers (
    id INT PRIMARY KEY,
    last_name VARCHAR(30) NOT NULL,
    first_name VARCHAR(20) NOT NULL,
    father_name VARCHAR(20) NOT NULL
);

CREATE TABLE subjects (
    id INT PRIMARY KEY,
    name VARCHAR(30) NOT NULL,
    teacher_id INT,
    FOREIGN KEY (teacher_id) REFERENCES teachers(id)
	ON DELETE SET NULL
        ON UPDATE CASCADE
);

CREATE TABLE students (
    id INT PRIMARY KEY,
    last_name VARCHAR(30) NOT NULL,
    first_name VARCHAR(20) NOT NULL,
    father_name VARCHAR(20) NOT NULL,
    group_id INT,
    FOREIGN KEY (group_id) REFERENCES groups(id)
	ON DELETE SET NULL
	ON UPDATE CASCADE
);

CREATE TABLE marks (
    student_id INT,
    subject_id INT,
    mark TINYINT UNSIGNED NOT NULL CHECK (mark > 0 AND mark < 6),
    date DATE,
    FOREIGN KEY (student_id) REFERENCES students(id)
	    ON DELETE CASCADE
	    ON UPDATE CASCADE,
    FOREIGN KEY (subject_id) REFERENCES subjects(id)
	    ON DELETE CASCADE
	    ON UPDATE CASCADE        
);

INSERT INTO groups VALUES (1, 'ФАВТ 101'), (2, 'ФАВТ 102'), (3, 'ФАВТ 103');

INSERT INTO teachers VALUES (1, 'Семечнук', 'Семен', 'Семенович'), (2, 'Петренко', 'Петро', 'Петрович'), (3, 'Миколенко', 'Микола', 'Миколайович');

INSERT INTO subjects VALUES (1, 'Фізика', 1), (2, 'Теорія інформації', 2), (3, 'Комбінаторика', 2), (4, 'Програмування на С', 3), (5, 'Програмування на Java', 3);

INSERT INTO students VALUES (1, 'Демчук', 'Степан', 'Іванович', 1), (2, 'Третяк', 'Назар', 'Федорович', 1), 
(3, 'Демчук', 'Тетяна', 'Сергіївна', 1), (4, 'Шпак', 'Богдан', 'Юрійович', 1),
(5, 'Мазепа', 'Макар', 'Сергійович', 1), (6, 'Мазур', 'Оксана', 'Віталіївна', 1),
(7, 'Спічко', 'Євген', 'Сергійович', 1), (8, 'Татаров', 'Богдан', 'Петрович', 1),
(9, 'Шевченко', 'Тарас', 'Юрійович', 1), (10, 'Шевченко', 'Оксана', 'Назарівна', 1),
(11, 'Коваль', 'Марія', 'Євгенівна', 2), (12, 'Спис', 'Олександр', 'Богданович', 2),
(13, 'Нестерук', 'Олександр', 'Сергійович', 2), (14, 'Шпак', 'Юлія', 'Володимирівна', 2),
(15, 'Тищенко', 'Тетяна', 'Андріївна', 2), (16, 'Тищенко', 'Сергій', 'Андрійович', 2),
(17, 'Стеценко', 'Андрій', 'Валентинович', 2), (18, 'Волошенко', 'Владислав', 'Ігорович', 2),
(19, 'Дідок', 'Ігор', 'Олександрович', 2), (20, 'Давидок', 'Анастасія', 'Олегівна', 2),
(21, 'Дідок', 'Олександр', 'Олександрович', 3), (22, 'Тищенко', 'Роман', 'Валентинович', 3),
(23, 'Пащенко', 'Катерина', 'Вячеславівна', 3), (24, 'Стеценко', 'Роман', 'Вікторович', 3),
(25, 'Давидок', 'Олександр', 'Олегович', 3), (26, 'Корчинський', 'Назар', 'Богданович', 3),
(27, 'Помин', 'Віктор', 'Вікторович', 3), (28, 'Лазебник', 'Лариса', 'Олегівна', 3),
(29, 'Покладок', 'Ігор', 'Степанович', 3), (30, 'Шаркозі', 'Золтан', 'Йосипович', 3);

INSERT INTO marks VALUES 
(1, 1, 3, '2022-05-05'), (1, 1, 3, '2022-05-12'), (1, 1, 4, '2022-05-19'), (1, 1, 5, '2022-05-26'),
(1, 2, 2, '2022-05-05'), (1, 2, 3, '2022-05-12'), (1, 2, 3, '2022-05-19'), (1, 2, 1, '2022-05-26'),
(1, 3, 4, '2022-05-05'), (1, 3, 4, '2022-05-12'), (1, 3, 3, '2022-05-19'), (1, 3, 5, '2022-05-26'),
(1, 4, 4, '2022-05-05'), (1, 4, 4, '2022-05-12'), (1, 4, 5, '2022-05-19'), (1, 4, 5, '2022-05-26'),
(1, 5, 5, '2022-05-05'), (1, 5, 5, '2022-05-12'), (1, 5, 5, '2022-05-19'), (1, 5, 5, '2022-05-26'),
(2, 1, 3, '2022-05-05'), (2, 1, 2, '2022-05-12'), (2, 1, 3, '2022-05-19'), (2, 1, 4, '2022-05-26'),
(2, 2, 2, '2022-05-05'), (2, 2, 2, '2022-05-12'), (2, 2, 3, '2022-05-19'), (2, 2, 3, '2022-05-26'),
(2, 3, 3, '2022-05-05'), (2, 3, 4, '2022-05-12'), (2, 3, 3, '2022-05-19'), (2, 3, 4, '2022-05-26'),
(2, 4, 3, '2022-05-05'), (2, 4, 3, '2022-05-12'), (2, 4, 4, '2022-05-19'), (2, 4, 4, '2022-05-26'),
(2, 5, 3, '2022-05-05'), (2, 5, 3, '2022-05-12'), (2, 5, 1, '2022-05-19'), (2, 5, 3, '2022-05-26'),
(3, 1, 5, '2022-05-05'), (3, 1, 4, '2022-05-12'), (3, 1, 5, '2022-05-19'), (3, 1, 5, '2022-05-26'),
(3, 2, 5, '2022-05-05'), (3, 2, 5, '2022-05-12'), (3, 2, 5, '2022-05-19'), (3, 2, 5, '2022-05-26'),
(3, 3, 5, '2022-05-05'), (3, 3, 5, '2022-05-12'), (3, 3, 4, '2022-05-19'), (3, 3, 5, '2022-05-26'),
(3, 4, 5, '2022-05-05'), (3, 4, 5, '2022-05-12'), (3, 4, 5, '2022-05-19'), (3, 4, 5, '2022-05-26'),
(3, 5, 5, '2022-05-05'), (3, 5, 5, '2022-05-12'), (3, 5, 5, '2022-05-19'), (3, 5, 5, '2022-05-26'),
(4, 1, 3, '2022-05-05'), (4, 1, 3, '2022-05-12'), (4, 1, 4, '2022-05-19'), (4, 1, 5, '2022-05-26'),
(4, 2, 2, '2022-05-05'), (4, 2, 3, '2022-05-12'), (4, 2, 3, '2022-05-19'), (4, 2, 1, '2022-05-26'),
(4, 3, 4, '2022-05-05'), (4, 3, 4, '2022-05-12'), (4, 3, 3, '2022-05-19'), (4, 3, 5, '2022-05-26'),
(4, 4, 4, '2022-05-05'), (4, 4, 4, '2022-05-12'), (4, 4, 5, '2022-05-19'), (4, 4, 5, '2022-05-26'),
(4, 5, 5, '2022-05-05'), (4, 5, 5, '2022-05-12'), (4, 5, 5, '2022-05-19'), (4, 5, 5, '2022-05-26'),
(5, 1, 4, '2022-05-05'), (5, 1, 4, '2022-05-12'), (5, 1, 4, '2022-05-19'), (5, 1, 3, '2022-05-26'),
(5, 2, 3, '2022-05-05'), (5, 2, 2, '2022-05-12'), (5, 2, 1, '2022-05-19'), (5, 2, 3, '2022-05-26'),
(5, 3, 3, '2022-05-05'), (5, 3, 4, '2022-05-12'), (5, 3, 3, '2022-05-19'), (5, 3, 4, '2022-05-26'),
(5, 4, 3, '2022-05-05'), (5, 4, 2, '2022-05-12'), (5, 4, 1, '2022-05-19'), (5, 4, 4, '2022-05-26'),
(5, 5, 3, '2022-05-05'), (5, 5, 3, '2022-05-12'), (5, 5, 3, '2022-05-19'), (5, 5, 3, '2022-05-26'),
(6, 1, 5, '2022-05-05'), (6, 1, 3, '2022-05-12'), (6, 1, 5, '2022-05-19'), (6, 1, 5, '2022-05-26'),
(6, 2, 5, '2022-05-05'), (6, 2, 5, '2022-05-12'), (6, 2, 5, '2022-05-19'), (6, 2, 4, '2022-05-26'),
(6, 3, 4, '2022-05-05'), (6, 3, 5, '2022-05-12'), (6, 3, 4, '2022-05-19'), (6, 3, 5, '2022-05-26'),
(6, 4, 5, '2022-05-05'), (6, 4, 4, '2022-05-12'), (6, 4, 5, '2022-05-19'), (6, 4, 5, '2022-05-26'),
(6, 5, 4, '2022-05-05'), (6, 5, 4, '2022-05-12'), (6, 5, 5, '2022-05-19'), (6, 5, 5, '2022-05-26'),
(7, 1, 4, '2022-05-05'), (7, 1, 4, '2022-05-12'), (7, 1, 4, '2022-05-19'), (7, 1, 5, '2022-05-26'),
(7, 2, 3, '2022-05-05'), (7, 2, 4, '2022-05-12'), (7, 2, 2, '2022-05-19'), (7, 2, 5, '2022-05-26'),
(7, 3, 4, '2022-05-05'), (7, 3, 5, '2022-05-12'), (7, 3, 4, '2022-05-19'), (7, 3, 5, '2022-05-26'),
(7, 4, 4, '2022-05-05'), (7, 4, 4, '2022-05-12'), (7, 4, 3, '2022-05-19'), (7, 4, 4, '2022-05-26'),
(7, 5, 5, '2022-05-05'), (7, 5, 3, '2022-05-12'), (7, 5, 4, '2022-05-19'), (7, 5, 5, '2022-05-26'),
(8, 1, 2, '2022-05-05'), (8, 1, 4, '2022-05-12'), (8, 1, 3, '2022-05-19'), (8, 1, 3, '2022-05-26'),
(8, 2, 3, '2022-05-05'), (8, 2, 1, '2022-05-12'), (8, 2, 3, '2022-05-19'), (8, 2, 3, '2022-05-26'),
(8, 3, 4, '2022-05-05'), (8, 3, 2, '2022-05-12'), (8, 3, 4, '2022-05-19'), (8, 3, 3, '2022-05-26'),
(8, 4, 2, '2022-05-05'), (8, 4, 1, '2022-05-12'), (8, 4, 4, '2022-05-19'), (8, 4, 3, '2022-05-26'),
(8, 5, 3, '2022-05-05'), (8, 5, 2, '2022-05-12'), (8, 5, 2, '2022-05-19'), (8, 5, 3, '2022-05-26'),
(9, 1, 4, '2022-05-05'), (9, 1, 5, '2022-05-12'), (9, 1, 5, '2022-05-19'), (9, 1, 5, '2022-05-26'),
(9, 2, 3, '2022-05-05'), (9, 2, 4, '2022-05-12'), (9, 2, 5, '2022-05-19'), (9, 2, 4, '2022-05-26'),
(9, 3, 4, '2022-05-05'), (9, 3, 5, '2022-05-12'), (9, 3, 5, '2022-05-19'), (9, 3, 5, '2022-05-26'),
(9, 4, 4, '2022-05-05'), (9, 4, 4, '2022-05-12'), (9, 4, 5, '2022-05-19'), (9, 4, 4, '2022-05-26'),
(9, 5, 2, '2022-05-05'), (9, 5, 5, '2022-05-12'), (9, 5, 5, '2022-05-19'), (9, 5, 5, '2022-05-26'),
(10, 1, 3, '2022-05-05'), (10, 1, 3, '2022-05-12'), (10, 1, 3, '2022-05-19'), (10, 1, 3, '2022-05-26'),
(10, 2, 3, '2022-05-05'), (10, 2, 3, '2022-05-12'), (10, 2, 2, '2022-05-19'), (10, 2, 3, '2022-05-26'),
(10, 3, 2, '2022-05-05'), (10, 3, 3, '2022-05-12'), (10, 3, 1, '2022-05-19'), (10, 3, 3, '2022-05-26'),
(10, 4, 1, '2022-05-05'), (10, 4, 2, '2022-05-12'), (10, 4, 3, '2022-05-19'), (10, 4, 1, '2022-05-26'),
(10, 5, 2, '2022-05-05'), (10, 5, 1, '2022-05-12'), (10, 5, 2, '2022-05-19'), (10, 5, 1, '2022-05-26'),
(11, 1, 4, '2022-05-05'), (11, 1, 4, '2022-05-12'), (11, 1, 5, '2022-05-19'), (11, 1, 5, '2022-05-26'),
(11, 2, 4, '2022-05-05'), (11, 2, 4, '2022-05-12'), (11, 2, 4, '2022-05-19'), (11, 2, 2, '2022-05-26'),
(11, 3, 5, '2022-05-05'), (11, 3, 5, '2022-05-12'), (11, 3, 4, '2022-05-19'), (11, 3, 5, '2022-05-26'),
(11, 4, 5, '2022-05-05'), (11, 4, 5, '2022-05-12'), (11, 4, 5, '2022-05-19'), (11, 4, 5, '2022-05-26'),
(11, 5, 5, '2022-05-05'), (11, 5, 5, '2022-05-12'), (11, 5, 5, '2022-05-19'), (11, 5, 5, '2022-05-26'),
(12, 1, 4, '2022-05-05'), (12, 1, 3, '2022-05-12'), (12, 1, 4, '2022-05-19'), (12, 1, 5, '2022-05-26'),
(12, 2, 3, '2022-05-05'), (12, 2, 3, '2022-05-12'), (12, 2, 4, '2022-05-19'), (12, 2, 4, '2022-05-26'),
(12, 3, 4, '2022-05-05'), (12, 3, 5, '2022-05-12'), (12, 3, 4, '2022-05-19'), (12, 3, 5, '2022-05-26'),
(12, 4, 4, '2022-05-05'), (12, 4, 4, '2022-05-12'), (12, 4, 5, '2022-05-19'), (12, 4, 5, '2022-05-26'),
(12, 5, 4, '2022-05-05'), (12, 5, 4, '2022-05-12'), (12, 5, 2, '2022-05-19'), (12, 5, 4, '2022-05-26'),
(13, 1, 5, '2022-05-05'), (13, 1, 5, '2022-05-12'), (13, 1, 5, '2022-05-19'), (13, 1, 5, '2022-05-26'),
(13, 2, 5, '2022-05-05'), (13, 2, 5, '2022-05-12'), (13, 2, 5, '2022-05-19'), (13, 2, 5, '2022-05-26'),
(13, 3, 5, '2022-05-05'), (13, 3, 5, '2022-05-12'), (13, 3, 5, '2022-05-19'), (13, 3, 5, '2022-05-26'),
(13, 4, 5, '2022-05-05'), (13, 4, 5, '2022-05-12'), (13, 4, 5, '2022-05-19'), (13, 4, 5, '2022-05-26'),
(13, 5, 5, '2022-05-05'), (13, 5, 5, '2022-05-12'), (13, 5, 5, '2022-05-19'), (13, 5, 5, '2022-05-26'),
(14, 1, 4, '2022-05-05'), (14, 1, 3, '2022-05-12'), (14, 1, 5, '2022-05-19'), (14, 1, 5, '2022-05-26'),
(14, 2, 4, '2022-05-05'), (14, 2, 4, '2022-05-12'), (14, 2, 4, '2022-05-19'), (14, 2, 2, '2022-05-26'),
(14, 3, 5, '2022-05-05'), (14, 3, 5, '2022-05-12'), (14, 3, 4, '2022-05-19'), (14, 3, 5, '2022-05-26'),
(14, 4, 5, '2022-05-05'), (14, 4, 5, '2022-05-12'), (14, 4, 5, '2022-05-19'), (14, 4, 5, '2022-05-26'),
(14, 5, 5, '2022-05-05'), (14, 5, 5, '2022-05-12'), (14, 5, 5, '2022-05-19'), (14, 5, 5, '2022-05-26'),
(15, 1, 5, '2022-05-05'), (15, 1, 5, '2022-05-12'), (15, 1, 5, '2022-05-19'), (15, 1, 3, '2022-05-26'),
(15, 2, 4, '2022-05-05'), (15, 2, 3, '2022-05-12'), (15, 2, 2, '2022-05-19'), (15, 2, 4, '2022-05-26'),
(15, 3, 4, '2022-05-05'), (15, 3, 5, '2022-05-12'), (15, 3, 4, '2022-05-19'), (15, 3, 5, '2022-05-26'),
(15, 4, 4, '2022-05-05'), (15, 4, 3, '2022-05-12'), (15, 4, 2, '2022-05-19'), (15, 4, 5, '2022-05-26'),
(15, 5, 4, '2022-05-05'), (15, 5, 4, '2022-05-12'), (15, 5, 4, '2022-05-19'), (15, 5, 4, '2022-05-26'),
(16, 1, 5, '2022-05-05'), (16, 1, 5, '2022-05-12'), (16, 1, 5, '2022-05-19'), (16, 1, 5, '2022-05-26'),
(16, 2, 5, '2022-05-05'), (16, 2, 5, '2022-05-12'), (16, 2, 5, '2022-05-19'), (16, 2, 5, '2022-05-26'),
(16, 3, 5, '2022-05-05'), (16, 3, 5, '2022-05-12'), (16, 3, 5, '2022-05-19'), (16, 3, 5, '2022-05-26'),
(16, 4, 5, '2022-05-05'), (16, 4, 5, '2022-05-12'), (16, 4, 5, '2022-05-19'), (16, 4, 5, '2022-05-26'),
(16, 5, 5, '2022-05-05'), (16, 5, 5, '2022-05-12'), (16, 5, 5, '2022-05-19'), (16, 5, 5, '2022-05-26'),
(17, 1, 5, '2022-05-05'), (17, 1, 5, '2022-05-12'), (17, 1, 5, '2022-05-19'), (17, 1, 5, '2022-05-26'),
(17, 2, 4, '2022-05-05'), (17, 2, 5, '2022-05-12'), (17, 2, 3, '2022-05-19'), (17, 2, 5, '2022-05-26'),
(17, 3, 5, '2022-05-05'), (17, 3, 5, '2022-05-12'), (17, 3, 5, '2022-05-19'), (17, 3, 5, '2022-05-26'),
(17, 4, 5, '2022-05-05'), (17, 4, 5, '2022-05-12'), (17, 4, 4, '2022-05-19'), (17, 4, 5, '2022-05-26'),
(17, 5, 5, '2022-05-05'), (17, 5, 4, '2022-05-12'), (17, 5, 5, '2022-05-19'), (17, 5, 5, '2022-05-26'),
(18, 1, 3, '2022-05-05'), (18, 1, 5, '2022-05-12'), (18, 1, 4, '2022-05-19'), (18, 1, 4, '2022-05-26'),
(18, 2, 4, '2022-05-05'), (18, 2, 2, '2022-05-12'), (18, 2, 4, '2022-05-19'), (18, 2, 4, '2022-05-26'),
(18, 3, 5, '2022-05-05'), (18, 3, 3, '2022-05-12'), (18, 3, 5, '2022-05-19'), (18, 3, 4, '2022-05-26'),
(18, 4, 3, '2022-05-05'), (18, 4, 2, '2022-05-12'), (18, 4, 5, '2022-05-19'), (18, 4, 4, '2022-05-26'),
(18, 5, 4, '2022-05-05'), (18, 5, 3, '2022-05-12'), (18, 5, 4, '2022-05-19'), (18, 5, 4, '2022-05-26'),
(19, 1, 5, '2022-05-05'), (19, 1, 5, '2022-05-12'), (19, 1, 5, '2022-05-19'), (19, 1, 5, '2022-05-26'),
(19, 2, 4, '2022-05-05'), (19, 2, 5, '2022-05-12'), (19, 2, 5, '2022-05-19'), (19, 2, 5, '2022-05-26'),
(19, 3, 5, '2022-05-05'), (19, 3, 5, '2022-05-12'), (19, 3, 5, '2022-05-19'), (19, 3, 5, '2022-05-26'),
(19, 4, 5, '2022-05-05'), (19, 4, 5, '2022-05-12'), (19, 4, 5, '2022-05-19'), (19, 4, 5, '2022-05-26'),
(19, 5, 3, '2022-05-05'), (19, 5, 5, '2022-05-12'), (19, 5, 5, '2022-05-19'), (19, 5, 5, '2022-05-26'),
(20, 1, 4, '2022-05-05'), (20, 1, 4, '2022-05-12'), (20, 1, 4, '2022-05-19'), (20, 1, 4, '2022-05-26'),
(20, 2, 4, '2022-05-05'), (20, 2, 4, '2022-05-12'), (20, 2, 3, '2022-05-19'), (20, 2, 4, '2022-05-26'),
(20, 3, 3, '2022-05-05'), (20, 3, 4, '2022-05-12'), (20, 3, 3, '2022-05-19'), (20, 3, 4, '2022-05-26'),
(20, 4, 2, '2022-05-05'), (20, 4, 3, '2022-05-12'), (20, 4, 4, '2022-05-19'), (20, 4, 2, '2022-05-26'),
(20, 5, 3, '2022-05-05'), (20, 5, 2, '2022-05-12'), (20, 5, 2, '2022-05-19'), (20, 5, 2, '2022-05-26'),
(21, 1, 5, '2022-05-05'), (21, 1, 4, '2022-05-12'), (21, 1, 4, '2022-05-19'), (21, 1, 5, '2022-05-26'),
(21, 2, 5, '2022-05-05'), (21, 2, 4, '2022-05-12'), (21, 2, 3, '2022-05-19'), (21, 2, 2, '2022-05-26'),
(21, 3, 1, '2022-05-05'), (21, 3, 4, '2022-05-12'), (21, 3, 3, '2022-05-19'), (21, 3, 5, '2022-05-26'),
(21, 4, 4, '2022-05-05'), (21, 4, 5, '2022-05-12'), (21, 4, 4, '2022-05-19'), (21, 4, 3, '2022-05-26'),
(21, 5, 4, '2022-05-05'), (21, 5, 4, '2022-05-12'), (21, 5, 5, '2022-05-19'), (21, 5, 5, '2022-05-26'),
(22, 1, 3, '2022-05-05'), (22, 1, 3, '2022-05-12'), (22, 1, 4, '2022-05-19'), (22, 1, 4, '2022-05-26'),
(22, 2, 2, '2022-05-05'), (22, 2, 3, '2022-05-12'), (22, 2, 3, '2022-05-19'), (22, 2, 3, '2022-05-26'),
(22, 3, 3, '2022-05-05'), (22, 3, 4, '2022-05-12'), (22, 3, 3, '2022-05-19'), (22, 3, 5, '2022-05-26'),
(22, 4, 3, '2022-05-05'), (22, 4, 3, '2022-05-12'), (22, 4, 5, '2022-05-19'), (22, 4, 2, '2022-05-26'),
(22, 5, 3, '2022-05-05'), (22, 5, 3, '2022-05-12'), (22, 5, 2, '2022-05-19'), (22, 5, 3, '2022-05-26'),
(23, 1, 4, '2022-05-05'), (23, 1, 4, '2022-05-12'), (23, 1, 5, '2022-05-19'), (23, 1, 4, '2022-05-26'),
(23, 2, 4, '2022-05-05'), (23, 2, 4, '2022-05-12'), (23, 2, 3, '2022-05-19'), (23, 2, 5, '2022-05-26'),
(23, 3, 4, '2022-05-05'), (23, 3, 4, '2022-05-12'), (23, 3, 4, '2022-05-19'), (23, 3, 3, '2022-05-26'),
(23, 4, 4, '2022-05-05'), (23, 4, 4, '2022-05-12'), (23, 4, 2, '2022-05-19'), (23, 4, 5, '2022-05-26'),
(23, 5, 4, '2022-05-05'), (23, 5, 4, '2022-05-12'), (23, 5, 4, '2022-05-19'), (23, 5, 2, '2022-05-26'),
(24, 1, 3, '2022-05-05'), (24, 1, 3, '2022-05-12'), (24, 1, 5, '2022-05-19'), (24, 1, 5, '2022-05-26'),
(24, 2, 3, '2022-05-05'), (24, 2, 4, '2022-05-12'), (24, 2, 3, '2022-05-19'), (24, 2, 3, '2022-05-26'),
(24, 3, 4, '2022-05-05'), (24, 3, 5, '2022-05-12'), (24, 3, 3, '2022-05-19'), (24, 3, 5, '2022-05-26'),
(24, 4, 4, '2022-05-05'), (24, 4, 4, '2022-05-12'), (24, 4, 4, '2022-05-19'), (24, 4, 5, '2022-05-26'),
(24, 5, 4, '2022-05-05'), (24, 5, 4, '2022-05-12'), (24, 5, 4, '2022-05-19'), (24, 5, 1, '2022-05-26'),
(25, 1, 4, '2022-05-05'), (25, 1, 4, '2022-05-12'), (25, 1, 4, '2022-05-19'), (25, 1, 3, '2022-05-26'),
(25, 2, 3, '2022-05-05'), (25, 2, 3, '2022-05-12'), (25, 2, 5, '2022-05-19'), (25, 2, 4, '2022-05-26'),
(25, 3, 3, '2022-05-05'), (25, 3, 4, '2022-05-12'), (25, 3, 3, '2022-05-19'), (25, 3, 4, '2022-05-26'),
(25, 4, 3, '2022-05-05'), (25, 4, 3, '2022-05-12'), (25, 4, 1, '2022-05-19'), (25, 4, 3, '2022-05-26'),
(25, 5, 3, '2022-05-05'), (25, 5, 4, '2022-05-12'), (25, 5, 3, '2022-05-19'), (25, 5, 3, '2022-05-26'),
(26, 1, 4, '2022-05-05'), (26, 1, 5, '2022-05-12'), (26, 1, 5, '2022-05-19'), (26, 1, 5, '2022-05-26'),
(26, 2, 4, '2022-05-05'), (26, 2, 4, '2022-05-12'), (26, 2, 4, '2022-05-19'), (26, 2, 5, '2022-05-26'),
(26, 3, 4, '2022-05-05'), (26, 3, 5, '2022-05-12'), (26, 3, 4, '2022-05-19'), (26, 3, 5, '2022-05-26'),
(26, 4, 4, '2022-05-05'), (26, 4, 5, '2022-05-12'), (26, 4, 4, '2022-05-19'), (26, 4, 5, '2022-05-26'),
(26, 5, 4, '2022-05-05'), (26, 5, 4, '2022-05-12'), (26, 5, 5, '2022-05-19'), (26, 5, 5, '2022-05-26'),
(27, 1, 4, '2022-05-05'), (27, 1, 4, '2022-05-12'), (27, 1, 4, '2022-05-19'), (27, 1, 3, '2022-05-26'),
(27, 2, 3, '2022-05-05'), (27, 2, 4, '2022-05-12'), (27, 2, 2, '2022-05-19'), (27, 2, 4, '2022-05-26'),
(27, 3, 4, '2022-05-05'), (27, 3, 4, '2022-05-12'), (27, 3, 3, '2022-05-19'), (27, 3, 4, '2022-05-26'),
(27, 4, 4, '2022-05-05'), (27, 4, 4, '2022-05-12'), (27, 4, 3, '2022-05-19'), (27, 4, 1, '2022-05-26'),
(27, 5, 4, '2022-05-05'), (27, 5, 3, '2022-05-12'), (27, 5, 4, '2022-05-19'), (27, 5, 4, '2022-05-26'),
(28, 1, 2, '2022-05-05'), (28, 1, 4, '2022-05-12'), (28, 1, 4, '2022-05-19'), (28, 1, 4, '2022-05-26'),
(28, 2, 3, '2022-05-05'), (28, 2, 2, '2022-05-12'), (28, 2, 3, '2022-05-19'), (28, 2, 2, '2022-05-26'),
(28, 3, 4, '2022-05-05'), (28, 3, 2, '2022-05-12'), (28, 3, 4, '2022-05-19'), (28, 3, 3, '2022-05-26'),
(28, 4, 3, '2022-05-05'), (28, 4, 4, '2022-05-12'), (28, 4, 4, '2022-05-19'), (28, 4, 4, '2022-05-26'),
(28, 5, 2, '2022-05-05'), (28, 5, 4, '2022-05-12'), (28, 5, 4, '2022-05-19'), (28, 5, 4, '2022-05-26'),
(29, 1, 4, '2022-05-05'), (29, 1, 4, '2022-05-12'), (29, 1, 4, '2022-05-19'), (29, 1, 4, '2022-05-26'),
(29, 2, 3, '2022-05-05'), (29, 2, 4, '2022-05-12'), (29, 2, 3, '2022-05-19'), (29, 2, 5, '2022-05-26'),
(29, 3, 4, '2022-05-05'), (29, 3, 4, '2022-05-12'), (29, 3, 2, '2022-05-19'), (29, 3, 4, '2022-05-26'),
(29, 4, 4, '2022-05-05'), (29, 4, 4, '2022-05-12'), (29, 4, 4, '2022-05-19'), (29, 4, 3, '2022-05-26'),
(29, 5, 3, '2022-05-05'), (29, 5, 4, '2022-05-12'), (29, 5, 3, '2022-05-19'), (29, 5, 4, '2022-05-26'),
(30, 1, 3, '2022-05-05'), (30, 1, 3, '2022-05-12'), (30, 1, 4, '2022-05-19'), (30, 1, 3, '2022-05-26'),
(30, 2, 3, '2022-05-05'), (30, 2, 3, '2022-05-12'), (30, 2, 3, '2022-05-19'), (30, 2, 3, '2022-05-26'),
(30, 3, 2, '2022-05-05'), (30, 3, 3, '2022-05-12'), (30, 3, 5, '2022-05-19'), (30, 3, 4, '2022-05-26'),
(30, 4, 1, '2022-05-05'), (30, 4, 2, '2022-05-12'), (30, 4, 4, '2022-05-19'), (30, 4, 2, '2022-05-26'),
(30, 5, 3, '2022-05-05'), (30, 5, 2, '2022-05-12'), (30, 5, 4, '2022-05-19'), (30, 5, 5, '2022-05-26');


/* 5 студентов с наибольшим средним баллом по всем предметам */

SELECT students.last_name, students.first_name, students.father_name, AVG(marks.mark) AS average_mark 
FROM marks JOIN students ON marks.student_id = students.id
GROUP BY student_id
ORDER BY average_mark DESC
LIMIT 0,5;


/* 1 студент с наивысшим средним баллом по одному предмету */

SELECT subjects.name, students.last_name, students.first_name, students.father_name, AVG(marks.mark) AS average_mark 
FROM marks
JOIN students ON marks.student_id = students.id
JOIN subjects ON marks.subject_id = subjects.id
WHERE marks.subject_id = 1
GROUP BY subject_id, student_id
ORDER BY average_mark DESC, subject_id
LIMIT 0,1;


/* Средний балл в группе по одному предмету */

SELECT groups.name AS group_name, subjects.name, AVG(marks.mark) AS average_mark 
FROM groups, marks
JOIN students ON marks.student_id = students.id
JOIN subjects ON marks.subject_id = subjects.id
WHERE students.group_id = groups.id
GROUP BY group_id, subject_id;


/* Средний балл в потоке */

SELECT AVG(marks.mark) AS average_mark 
FROM marks;


/* Какие курсы читает преподаватель */

SELECT subjects.name AS subject_name
FROM subjects JOIN teachers ON subjects.teacher_id = teachers.id
WHERE subjects.teacher_id = 3;


/* Список студентов в группе */

SELECT last_name, first_name, father_name
FROM students
WHERE group_id = 1
ORDER BY last_name, first_name, father_name;


/* Оценки студентов в группе по предмету */

SELECT last_name, first_name, father_name, mark
FROM students JOIN marks ON id = student_id
WHERE group_id = 1 AND subject_id = 1
ORDER BY last_name, first_name, father_name;


/* Оценки студентов в группе по предмету на последнем занятии */

SELECT last_name, first_name, father_name, mark
FROM students JOIN marks ON id = student_id
WHERE group_id = 1 AND subject_id = 1 AND date = '2022-05-26'
ORDER BY last_name, first_name, father_name;


/* Список курсов, которые посещает студент */

SELECT DISTINCT subjects.name 
FROM subjects JOIN marks ON marks.subject_id = subjects.id
WHERE marks.student_id = 1;


/* Список курсов, которые студенту читает преподаватель */

SELECT DISTINCT subjects.name 
FROM subjects JOIN marks ON marks.subject_id = subjects.id
WHERE marks.student_id = 1 AND subjects.teacher_id = 3;


/* Средний балл, который преподаватель ставит студенту */

SELECT AVG(mark) 
FROM subjects JOIN marks ON marks.subject_id = subjects.id
WHERE marks.student_id = 1 AND subjects.teacher_id = 3;


/* Средний балл, который ставит преподаватель */

SELECT AVG(mark) 
FROM marks JOIN subjects ON marks.subject_id = subjects.id
WHERE subjects.teacher_id = 1;